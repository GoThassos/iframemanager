/*!
 * iframemanager v1.1.0
 * Author Orest Bida
 * Released under the MIT License
 */
(()=>{'use strict';const e='click',t='{data-id}';let n,o,c,i,s,r={},a=!1,l='',f={},d=new Map,u='api';const m=['onload','onerror','src'],v=e=>'function'==typeof e,h=e=>'string'==typeof e,b=e=>o.createElement(e),p=()=>b('div'),w=()=>{const e=b('button');return e.type='button',e},_=(e,t)=>e.className=t,$=(e,t)=>e.appendChild(t),g=e=>e&&Object.keys(e)||[],S=(e,t)=>{for(const n in t)y(e,n,t[n])},I=e=>{const t=e.dataset,n={},o='data-iframe-',c=e.getAttributeNames().filter((e=>e.slice(0,12)===o)).map((e=>e.slice(12))),i=e.querySelector('[data-placeholder]');i&&i.removeAttribute('data-visible');const s=i&&i.cloneNode(!0);for(const t of c)n[t]=e.getAttribute(o+t);return{t:t.id,o:t.title,i:t.thumbnail,l:t.params,u:e,m:null,v:i,h:s,p:null,_:!1,$:!1,g:!0,S:n}},x=(e,t)=>{const o=r[e];if('IntersectionObserver'in n){const e=new IntersectionObserver((n=>{n.forEach((n=>{n.isIntersecting&&(T(t,o[n.target.dataset.index]),e.unobserve(n.target))}))}));for(const t of o)e.observe(t.u)}},T=(e,n)=>{const o=e=>{n.p.style.backgroundImage=`url('${e}')`;const t=new Image;t.onload=()=>{n.p.classList.add('loaded')},t.src=e};if(h(n.i))''!==n.i&&o(n.i);else if(v(e))e(n.t,(e=>o(e)));else if(h(e)){const c=e.replace(t,n.t);o(c)}},k=(e,n)=>{if(e._)return;if(e._=!0,e.v){const t=e.h.cloneNode(!0);e.v.replaceWith(t),e.v=t}const o=n.iframe;if(v(n.onAccept))return void n.onAccept(e.u,(t=>{if(!(t instanceof HTMLIFrameElement))return!1;S(t,o),S(t,e.S),e.I=t,e._=!0,e.u.classList.add('c-h-b')}));e.I=b('iframe');const c=e.l||n.iframe&&n.iframe.params;let i=(n.embedUrl||'').replace(t,e.t);e.o&&(e.I.title=e.o),c&&('ap:'===c.substring(0,3)?i+=c.substring(3):i+='?'+c),e.I.onload=()=>{e.u.classList.add('c-h-b'),e.I.onload=void 0,o&&v(o.onload)&&o.onload(e.t,e.I)},S(e.I,o),S(e.I,e.S),e.I.src=i,$(e.m,e.I)},y=(e,t,n)=>{m.includes(t)||e.setAttribute(t,n)},D=e=>{e.u.classList.add('c-h-n'),e.g=!1},O=e=>{e.u.classList.remove('c-h-n','c-h-b'),e.g=!0},P=e=>(e=o.cookie.match(`(^|;)\\s*${e}\\s*=\\s*([^;]+)`))?e.pop():'',E=(t,n,c)=>{const i=r[t],s=n.languages;i.forEach((i=>{if(!i.$&&s){const r=s[l]?.loadBtn,a=s[l]?.notice,f=s[l]?.loadAllBtn,d=o.createElement('div'),m=p(),v=p(),g=p(),S=p();_(d,'cll'),i.m=d;const I=()=>{D(i),k(i,n)};if(r){const t=w();t.textContent=r,_(t,'c-l-b'),t.addEventListener(e,I),$(S,t)}if(f){const n=w();n.textContent=f,_(n,'c-la-b'),n.addEventListener(e,(()=>{I(),u=e,A.acceptService(t)})),$(S,n)}const x=p(),T=p(),y=p(),O=p(),P=p();_(x,'cc-text'),_(O,'c-bg-i'),i.p=O,_(y,'c-ld'),h(i.i)&&''===i.i||_(T,'c-bg');const E=i.o,M=o.createDocumentFragment();if(E){const e=b('span');_(e,'c-tl'),e.insertAdjacentHTML('beforeend',E),$(M,e)}$(x,M),m&&x.insertAdjacentHTML('beforeend',a||''),$(v,x),_(P,'c-t-cn'),_(v,'c-n-t'),_(g,'c-n-c'),_(m,'c-nt'),_(S,'c-n-a'),$(P,v),(r||f)&&$(P,S),$(g,P),$(m,g),$(T,O),$(d,m),(n.thumbnailUrl||i.i)&&$(d,T),$(d,y),c&&i.u.classList.add('c-h-n'),i.u.prepend(d),i.$=!0}}))},M=(e,t)=>{const o=r[e];if('IntersectionObserver'in n){const e=new IntersectionObserver((n=>{if(a)e.disconnect();else for(let c=0;c<n.length;++c)n[c].isIntersecting&&(c=>{const i=n[c].target;setTimeout((()=>{const e=i.dataset.index;k(o[e],t),D(o[e])}),50*c),e.unobserve(i)})(c)}));o.forEach((t=>{t._||e.observe(t.u)}))}},C=(e,t)=>e in t?e:g(t).length>0?l in t?l:g(t)[0]:void 0,j=(e,t)=>{const{cookie:n}=t;P(n.name)||(e=>{const{hostname:t,protocol:n}=location,c=e.name,i=new Date,s=e.path||'/',r=864e5*(e.expiration||182),a=e.sameSite||'Lax',l=e.domain||t;i.setTime(i.getTime()+r);let f=c+'=1'+(0!==r?`; Expires=${i.toUTCString()}`:'')+`; Path=${s}`+`; SameSite=${a}`;l.indexOf('.')>-1&&(f+=`; Domain=${l}`),'https:'===n&&(f+='; Secure'),o.cookie=f})(n),M(e,t)},L=(e,t)=>{const{cookie:n}=t;P(n.name)&&(e=>{const t=e.name,n=e.path||'/',c=e.domain||location.hostname;o.cookie=`${t}=; Path=${n}; Domain=${c}; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`})(n),((e,t)=>{const n=r[e];for(let e=0;e<n.length;e++)(e=>{var o;n[e]._&&(v(t.onReject)?(t.onReject(n[e].I),n[e]._=!1):((o=n[e]).I.parentNode.removeChild(o.I),o._=!1)),O(n[e])})(e)})(e,t)},N=()=>{v(s)&&s({state:A.getState(),eventSource:u})},A={acceptService:e=>{if(a=!1,'all'===e){let e=!1;for(const t of i)d.get(t)||(d.set(t,!0),j(t,f[t]),e=!0);e&&N()}else i.includes(e)&&(d.get(e)||(d.set(e,!0),j(e,f[e]),N()));u='api'},rejectService:e=>{if('all'===e){a=!0;let e=!1;for(const t of i)L(t,f[t]),d.get(t)&&(d.set(t,!1),e=!0);e&&N()}else i.includes(e)&&(L(e,f[e]),d.get(e)&&(d.set(e,!1),N()))},childExists:async({parent:e=n,childProperty:t,childSelector:o='iframe',timeout:c=1e3,maxTimeout:i=15e3})=>{let s=1;const r=t?()=>e[t]:()=>e.querySelector(o);return new Promise((e=>{const t=()=>{if(r()||s++*c>i)return e(void 0!==r());setTimeout(t,c)};t()}))},getState:()=>({services:new Map(d),acceptedServices:[...d].filter((([e,t])=>!!t)).map((([e])=>e))}),getConfig:()=>c,run:e=>{if(o=document,n=window,c=e,f=c.services,s=c.onChange,i=g(f),0===i.length)return;l=c.currLang;const t=f[i[0]].languages;!0===c.autoLang?l=C(navigator.language.slice(0,2).toLowerCase(),t):h(c.currLang)&&(l=C(c.currLang,t));for(const e of i){r[e]=[];const t=o.querySelectorAll(`div[data-service="${e}"]`),n=t.length;if(0===n)continue;for(let o=0;o<n;o++)t[o].dataset.index=o,r[e].push(I(t[o]));const c=f[e],{cookie:i}=c;!i&&(c.cookie={});const s=c.cookie,a=s.name||`im_${e}`;s.name=a;const l=P(a);d.set(e,!!l),l?(E(e,c,!0),M(e,c)):E(e,c,!1),x(e,c.thumbnailUrl)}}},F='iframemanager';'undefined'==typeof window||v(window[F])||(window[F]=()=>A)})();