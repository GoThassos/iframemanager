/*!
 * iframemanager v1.1.0
 * Author Orest Bida
 * Released under the MIT License
 */
(()=>{'use strict';let t,e={},n=[],o=[],c=!1,i='',s={},r=[],a={},f=new Map;const l=['onload','onerror','src'],u=t=>'function'==typeof t,d=t=>'string'==typeof t,v=t=>t&&Object.keys(t)||[],b=t=>{const e=t.dataset,n={},o='data-iframe-',c=t.getAttributeNames().filter((t=>t.slice(0,12)===o)).map((t=>t.slice(12)));for(const e of c)n[e]=t.getAttribute(o+e);return{t:e.id,o:e.title,i:e.thumbnail,l:e.params,u:'thumbnailpreload'in e,v:'autoscale'in e,p:t,h:null,m:!1,S:!1,$:!0,_:n}},p=(t,n)=>{const o=e[t];if('IntersectionObserver'in window){const t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(h(n,o[e.target.dataset.index]),t.unobserve(e.target))}))}));for(const e of o)t.observe(e.p)}},h=(t,e)=>{const n=t=>{e.h.style.backgroundImage=`url('${t}')`;const n=new Image;n.onload=function(){e.h.classList.add('loaded')},n.src=t};if(d(e.i))e.u&&g(e.i),''!==e.i&&n(e.i);else if(u(t))t(e.t,(t=>{k(t),e.u&&g(t),n(t)}));else if(d(t)){const o=t.replace('{data-id}',e.t);k(o),e.u&&g(o),n(o)}},m=(t,e)=>{if(t.m)return;if(t.m=!0,u(e.onAccept))return void e.onAccept(t.p,(e=>{t.k=e,t.m=!0,t.p.classList.add('c-h-b')}));t.k=I('iframe');const n=t.l||e.iframe&&e.iframe.params;let o=(e.embedUrl||'').replace('{data-id}',t.t);t.o&&(t.k.title=t.o),n&&('ap:'===n.substring(0,3)?o+=n.substring(3):o+='?'+n);const c=e.iframe;t.k.onload=function(){t.p.classList.add('c-h-b'),t.k.onload=void 0,c&&u(c.onload)&&c.onload(t.t,t.k)};for(const e in c)w(t.k,e,c[e]);for(const e in t._)w(t.k,e,t._[e]);t.k.src=o,y(t.p,t.k)},w=(t,e,n)=>{l.includes(e)||t.setAttribute(e,n)},S=t=>{t.p.classList.add('c-h-n'),t.$=!1},$=t=>{t.p.classList.remove('c-h-n','c-h-b'),t.$=!0},_=t=>(t=a.cookie.match(`(^|;)\\s*${t}\\s*=\\s*([^;]+)`))?t.pop():'',k=t=>{const e=t.split('://'),o=e[0];if('http'===o||'https'===o){const t=e[1]&&e[1].split('/')[0];if(t&&t!==location.hostname&&-1===n.indexOf(t)){const e=I('link');e.rel='preconnect',e.href=`${o}://${t}`,y(a.head,e),n.push(t)}}},g=t=>{if(t&&-1===o.indexOf(t)){const e=I('link');e.rel='preload',e.as='image',e.href=t,y(a.head,e),o.push(t)}},I=t=>a.createElement(t),O=()=>I('div'),x=()=>{const t=I('button');return t.type='button',t},D=(t,e)=>t.className=e,y=(t,e)=>t.appendChild(e),P=(n,o,c)=>{const s=e[n],r=o.languages;s.forEach((e=>{if(!e.S){const s=r[i].loadBtn,l=r[i].notice,v=r[i].loadAllBtn,b=a.createDocumentFragment(),p=O(),h=O(),w=O(),$=O(),_=()=>{S(e),m(e,o)};if(s){const t=x();t.textContent=s,D(t,'c-l-b'),t.addEventListener('click',_),y($,t)}if(v){const e=x();e.textContent=v,D(e,'c-la-b'),e.addEventListener('click',(()=>{_(),N.acceptService(n),u(t)&&t({servicesState:f,eventSource:'click'})})),y($,e)}const k=O(),g=O(),P=O(),T=O(),j=O();D(k,'cc-text'),D(T,'c-bg-i'),e.h=T,D(P,'c-ld'),d(e.i)&&''===e.i||D(g,'c-bg');const E=e.o,M=a.createDocumentFragment();if(E){const t=I('span');D(t,'c-tl'),t.insertAdjacentHTML('beforeend',E),y(M,t)}y(k,M),p&&k.insertAdjacentHTML('beforeend',l||''),y(h,k),D(j,'c-t-cn'),D(h,'c-n-t'),D(w,'c-n-c'),D(p,'c-nt'),D($,'c-n-a'),y(j,h),y(j,$),y(w,j),y(p,w),y(g,T),y(b,p),(o.thumbnailUrl||e.i)&&y(b,g),y(b,P),c&&e.p.classList.add('c-h-n'),y(e.p,b),e.S=!0}}))},T=(t,n)=>{const o=e[t];if('IntersectionObserver'in window){const t=new IntersectionObserver((e=>{if(c)t.disconnect();else for(let c=0;c<e.length;++c)e[c].isIntersecting&&(c=>{const i=e[c].target;setTimeout((()=>{const t=i.dataset.index;m(o[t],n),S(o[t])}),50*c),t.unobserve(i)})(c)}));o.forEach((e=>{e.m||t.observe(e.p)}))}},j=(t,e)=>t in e?t:v(e).length>0?i in e?i:v(e)[0]:void 0,E=(t,e)=>{const{cookie:n}=e;_(n.name)||(t=>{const{hostname:e,protocol:n}=location,o=t.name,c=new Date,i=t.path||'/',s=864e5*(t.expiration||182),r=t.sameSite||'Lax',f=t.domain||e;c.setTime(c.getTime()+s);let l=o+'=1'+(0!==s?`; Expires=${c.toUTCString()}`:'')+`; Path=${i}`+`; SameSite=${r}`;f.indexOf('.')>-1&&(l+=`; Domain=${f}`),'https:'===n&&(l+='; Secure'),a.cookie=l})(n),T(t,e)},M=(t,n)=>{const{cookie:o}=n;_(o.name)&&(t=>{const e=t.name,n=t.path||'/',o=t.domain||location.hostname;a.cookie=`${e}=; Path=${n}; Domain=${o}; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`})(o),((t,n)=>{const o=e[t];for(let t=0;t<o.length;t++)(t=>{var e;o[t].m&&(u(n.onReject)?(n.onReject(o[t].k),o[t].m=!1):((e=o[t]).k.parentNode.removeChild(e.k),e.m=!1)),$(o[t])})(t)})(t,n)},N={acceptService:e=>{if(c=!1,'all'===e){let e=!1;for(const t of r)f.get(t)||(f.set(t,!0),E(t,s[t]),e=!0);e&&u(t)&&t({servicesState:f,eventSource:'api'})}else r.includes(e)&&(f.get(e)||(f.set(e,!0),E(e,s[e]),u(t)&&t({servicesState:f,eventSource:'api'})))},rejectService:e=>{if('all'===e){c=!0;let e=!1;for(const t of r)f.get(t)&&(f.set(t,!1),M(t,s[t]),e=!0);e&&u(t)&&t({servicesState:f,eventSource:'api'})}else r.includes(e)&&f.get(e)&&(f.set(e,!1),M(e,s[e]),u(t)&&t({servicesState:f,eventSource:'api'}))},run:n=>{if(a=document,s=n.services,t=n.onChange,r=v(s),0===r.length)return;i=n.currLang;const o=s[r[0]].languages;!0===n.autoLang?i=j(navigator.language.slice(0,2).toLowerCase(),o):d(n.currLang)&&(i=j(n.currLang,o));for(const t of r){e[t]=[];const n=a.querySelectorAll(`div[data-service="${t}"]`),o=n.length;if(0===o)continue;for(let c=0;c<o;c++)n[c].dataset.index=c,e[t].push(b(n[c]));const c=s[t],{cookie:i}=c;!i&&(c.cookie={});const r=c.cookie,l=r.name||`im_${t}`;r.name=l;const u=_(l);f.set(t,!!u),u?(P(t,c,!0),T(t,c)):P(t,c,!1),p(t,c.thumbnailUrl)}}},A='iframemanager';'undefined'==typeof window||u(window[A])||(window[A]=()=>N)})();