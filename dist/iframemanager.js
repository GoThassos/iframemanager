/*!
 * iframemanager v1.1.0
 * Author Orest Bida
 * Released under the MIT License
 */
(()=>{'use strict';const t='click',e='{data-id}';let n,o,c,i={},s=[],r=[],a=!1,l='',f={},d=[],u=new Map,m='api';const h=['onload','onerror','src'],p=t=>'function'==typeof t,b=t=>'string'==typeof t,v=t=>t&&Object.keys(t)||[],_=t=>{const e=t.dataset,n={},o='data-iframe-',c=t.getAttributeNames().filter((t=>t.slice(0,12)===o)).map((t=>t.slice(12))),i=t.querySelector('[data-placeholder]'),s=i&&i.cloneNode(!0);for(const e of c)n[e]=t.getAttribute(o+e);return{t:e.id,o:e.title,i:e.thumbnail,l:e.params,u:'thumbnailpreload'in e,m:'autoscale'in e,h:t,p:null,v:i,_:s,$:null,g:!1,S:!1,k:!0,I:n}},w=(t,e)=>{const o=i[t];if('IntersectionObserver'in n){const t=new IntersectionObserver((n=>{n.forEach((n=>{n.isIntersecting&&($(e,o[n.target.dataset.index]),t.unobserve(n.target))}))}));for(const e of o)t.observe(e.h)}},$=(t,n)=>{const o=t=>{n.$.style.backgroundImage=`url('${t}')`;const e=new Image;e.onload=()=>{n.$.classList.add('loaded')},e.src=t};if(b(n.i))n.u&&T(n.i),''!==n.i&&o(n.i);else if(p(t))t(n.t,(t=>{P(t),n.u&&T(t),o(t)}));else if(b(t)){const c=t.replace(e,n.t);P(c),n.u&&T(c),o(c)}},g=(t,n,o)=>{if(t.g)return;if(t.g=!0,t.v){const e=t._.cloneNode(!0);t.v.replaceWith(e),t.v=e}const c=n.iframe;if(p(n.onAccept))return void n.onAccept(t.h,(e=>{if(e instanceof HTMLIFrameElement){for(const t in c)S(e,t,c[t]);for(const n in t.I)S(e,n,t.I[n]);t.P=e,t.g=!0,t.h.classList.add('c-h-b')}}));t.P=y('iframe');const i=t.l||n.iframe&&n.iframe.params;let s=(n.embedUrl||'').replace(e,t.t);t.o&&(t.P.title=t.o),i&&('ap:'===i.substring(0,3)?s+=i.substring(3):s+='?'+i),t.P.onload=()=>{t.h.classList.add('c-h-b'),t.P.onload=void 0,c&&p(c.onload)&&c.onload(t.t,t.P)};for(const e in c)S(t.P,e,c[e]);for(const e in t.I)S(t.P,e,t.I[e]);t.P.src=s,M(t.p,t.P)},S=(t,e,n)=>{h.includes(e)||t.setAttribute(e,n)},k=t=>{t.h.classList.add('c-h-n'),t.k=!1},I=t=>{t.h.classList.remove('c-h-n','c-h-b'),t.k=!0},x=t=>(t=o.cookie.match(`(^|;)\\s*${t}\\s*=\\s*([^;]+)`))?t.pop():'',P=t=>{const e=t.split('://'),n=e[0];if('http'===n||'https'===n){const t=e[1]&&e[1].split('/')[0];if(t&&t!==location.hostname&&-1===s.indexOf(t)){const e=y('link');e.rel='preconnect',e.href=`${n}://${t}`,M(o.head,e),s.push(t)}}},T=t=>{if(t&&-1===r.indexOf(t)){const e=y('link');e.rel='preload',e.as='image',e.href=t,M(o.head,e),r.push(t)}},y=t=>o.createElement(t),D=()=>y('div'),O=()=>{const t=y('button');return t.type='button',t},E=(t,e)=>t.className=e,M=(t,e)=>t.appendChild(e),j=(e,n,c)=>{const s=i[e],r=n.languages;s.forEach((i=>{if(!i.S){const s=r[l].loadBtn,a=r[l].notice,f=r[l].loadAllBtn,d=o.createElement('div'),u=D(),h=D(),p=D(),v=D();E(d,'cll'),i.p=d;const _=()=>{k(i),g(i,n)};if(s){const e=O();e.textContent=s,E(e,'c-l-b'),e.addEventListener(t,_),M(v,e)}if(f){const n=O();n.textContent=f,E(n,'c-la-b'),n.addEventListener(t,(()=>{_(),m=t,G.acceptService(e)})),M(v,n)}const w=D(),$=D(),S=D(),I=D(),x=D();E(w,'cc-text'),E(I,'c-bg-i'),i.$=I,E(S,'c-ld'),b(i.i)&&''===i.i||E($,'c-bg');const P=i.o,T=o.createDocumentFragment();if(P){const t=y('span');E(t,'c-tl'),t.insertAdjacentHTML('beforeend',P),M(T,t)}M(w,T),u&&w.insertAdjacentHTML('beforeend',a||''),M(h,w),E(x,'c-t-cn'),E(h,'c-n-t'),E(p,'c-n-c'),E(u,'c-nt'),E(v,'c-n-a'),M(x,h),M(x,v),M(p,x),M(u,p),M($,I),M(d,u),(n.thumbnailUrl||i.i)&&M(d,$),M(d,S),c&&i.h.classList.add('c-h-n'),i.h.prepend(d),i.S=!0}}))},C=(t,e)=>{const o=i[t];if('IntersectionObserver'in n){const t=new IntersectionObserver((n=>{if(a)t.disconnect();else for(let c=0;c<n.length;++c)n[c].isIntersecting&&(c=>{const i=n[c].target;setTimeout((()=>{const t=i.dataset.index;g(o[t],e),k(o[t])}),50*c),t.unobserve(i)})(c)}));o.forEach((e=>{e.g||t.observe(e.h)}))}},L=(t,e)=>t in e?t:v(e).length>0?l in e?l:v(e)[0]:void 0,N=(t,e)=>{const{cookie:n}=e;x(n.name)||(t=>{const{hostname:e,protocol:n}=location,c=t.name,i=new Date,s=t.path||'/',r=864e5*(t.expiration||182),a=t.sameSite||'Lax',l=t.domain||e;i.setTime(i.getTime()+r);let f=c+'=1'+(0!==r?`; Expires=${i.toUTCString()}`:'')+`; Path=${s}`+`; SameSite=${a}`;l.indexOf('.')>-1&&(f+=`; Domain=${l}`),'https:'===n&&(f+='; Secure'),o.cookie=f})(n),C(t,e)},A=(t,e)=>{const{cookie:n}=e;x(n.name)&&(t=>{const e=t.name,n=t.path||'/',c=t.domain||location.hostname;o.cookie=`${e}=; Path=${n}; Domain=${c}; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`})(n),((t,e)=>{const n=i[t];for(let t=0;t<n.length;t++)(t=>{var o;n[t].g&&(p(e.onReject)?(e.onReject(n[t].P),n[t].g=!1):((o=n[t]).P.parentNode.removeChild(o.P),o.g=!1)),I(n[t])})(t)})(t,e)},F=()=>{p(c)&&c({acceptedServices:[...u].filter((([t,e])=>!0===e)).map((([t,e])=>t)),eventSource:m})},G={acceptService:t=>{if(a=!1,'all'===t){let t=!1;for(const e of d)u.get(e)||(u.set(e,!0),N(e,f[e]),t=!0);t&&F()}else d.includes(t)&&(u.get(t)||(u.set(t,!0),N(t,f[t]),F()));m='api'},rejectService:t=>{if('all'===t){a=!0;let t=!1;for(const e of d)A(e,f[e]),u.get(e)&&(u.set(e,!1),t=!0);t&&F()}else d.includes(t)&&(A(t,f[t]),u.get(t)&&(u.set(t,!1),F()))},childExists:async({parent:t=n,childProperty:e,childSelector:o='iframe',timeout:c=1e3,maxTimeout:i=15e3})=>{let s=1;const r=e?()=>t[e]:()=>t.querySelector(o);return new Promise((t=>{const e=()=>{if(r()||s++*c>i)return t(void 0!==r());setTimeout(e,c)};e()}))},run:t=>{if(o=document,n=window,f=t.services,c=t.onChange,d=v(f),0===d.length)return;l=t.currLang;const e=f[d[0]].languages;!0===t.autoLang?l=L(navigator.language.slice(0,2).toLowerCase(),e):b(t.currLang)&&(l=L(t.currLang,e));for(const t of d){i[t]=[];const e=o.querySelectorAll(`div[data-service="${t}"]`),n=e.length;if(0===n)continue;for(let o=0;o<n;o++)e[o].dataset.index=o,i[t].push(_(e[o]));const c=f[t],{cookie:s}=c;!s&&(c.cookie={});const r=c.cookie,a=r.name||`im_${t}`;r.name=a;const l=x(a);u.set(t,!!l),l?(j(t,c,!0),C(t,c)):j(t,c,!1),w(t,c.thumbnailUrl)}}},H='iframemanager';'undefined'==typeof window||p(window[H])||(window[H]=()=>G)})();